= CLI Policy

This document outlines the usage, conventions, and best practices for the RAG CLI and TUI.

== Command Line Interface (CLI)

The RAG CLI provides a simple way to query the knowledge base from the terminal.

=== Basic Usage

----
$ rag --query "Your question here"
----

=== Options

* `--query, -q`:: The question to ask the assistant
* `--help, -h`:: Show help message
* `--version, -v`:: Show version information

=== Examples

----
$ rag --query "What is machine learning?"
$ rag -q "Tell me about neural networks"
----

== Text User Interface (TUI)

The TUI provides an interactive terminal-based interface.

=== Running the TUI

----
$ rag-tui
----

=== Commands

* `help`:: Show available commands
* `quit` / `exit`:: Exit the TUI
* `clear`:: Clear the screen

=== Keybindings

* `Ctrl+C`:: Exit the TUI
* `Ctrl+L`:: Clear screen
* `Up/Down`:: Navigate history

== Environment Setup

For Apple Silicon (M1/M2/M3) Macs, use Python 3.13:

----
$ python3.13 -m venv .venv
$ source .venv/bin/activate
$ pip install -e .
----

Or use the setup script:

----
$ ./setup-apple-silicon.sh
----

== Troubleshooting

=== Import Errors

If you encounter import errors, ensure the package is installed:

----
$ pip install -e .
----

=== Performance Issues

For optimal performance on Apple Silicon, ensure PyTorch can use MPS:

----
$ python -c "import torch; print(torch.backends.mps.is_available())"
----

If `False`, the CLI will fall back to CPU.

== Reporting Issues

For CLI-related issues, please:

. Check the FAQ in the documentation
. Search existing issues on GitHub
. Create a new issue with:
** Command used
** Error message
** System information (`uname -a`, `python --version`)

== Exit Codes

The RAG CLI uses standard exit codes:

* `0`:: Successful execution
* `1`:: General error
* `2`:: Invalid arguments or usage error
* 130:: Terminated by Ctrl+C (SIGINT)

== POSIX Compliance

The CLI follows POSIX conventions:

* Single-character options can be combined (e.g., `-q -v` = `-qv`)
* `--` separates options from positional arguments
* Long options use double dashes
* Exit codes are consistent with POSIX standards

== Security Considerations

* Do not expose API keys in command line arguments
* Use environment variables for sensitive configuration
* Review the Security Policy (SECURITY.asc) for vulnerability reporting
